# デザイン定義ガイドライン

## 目的
- iOS 26 世代の純正アプリ（写真 / Apple Music / App Store）のような、透明感と未来感を両立する最小限のビジュアルを再現する。
- 初めて利用するユーザーでも迷わないセマンティックな UI を徹底し、体験の学習コストを抑える。
- すべてのスタイル・アニメーションをデザイントークンとして定義し、プロダクト全体で一貫した実装を実現する。

---

## 1. ビジュアルデザイン原則
- **ミニマル & クリア**: ノイズの少ない配色、余白、透明感を基調とし、情報階層を視覚的に整理する。
- **セマンティックな情報設計**: 初見で意味が伝わるアイコン・コピー・ラベルを優先。抽象的な装飾は排除。
- **トークンファースト**: タイポグラフィ、カラー、スペーシング、モーションは必ずトークン経由で指定し、直接値のべた書きを禁止する。

---

## 2. タイポグラフィ
### 2.1 フォントファミリー
- 英語: `Inter`
- 日本語: `Noto Sans JP`
- 多言語表示が必要な場合は上記にフォールバックするスキームを決定しておく。

### 2.2 タイポグラフィスケール
| トークン | フォントサイズ / 行間 | Font Weight | 用途メモ |
| --- | --- | --- | --- |
| `typo-hero` | 48px / 56px | 200 | ヒーローヘッダー、メインヒーロー。|
| `typo-display` | 32px / 40px | 200 | 大きめのセクション見出し。|
| `typo-title` | 24px / 32px | 300 | タイトル・主要見出し。|
| `typo-body` | 16px / 24px | 400 | 標準本文。|
| `typo-footnote` | 16px / 24px | 300（opacity 0.7） | 注釈・補足。|

### 2.3 レタースペーシング・行送り
- デフォルト: `0` を基準とし、Hero/Display は `-0.5px` まで、本文は `0` 〜 `0.2px` を許容。
- 行送りは表の値をベースにし、段落間隔は `space-16` を推奨。密度を上げたい場合でも `space-12` 以下は避ける。

### 2.4 カラートークン（テキスト）
- `color-text-title` = `#3A3A3A`
- `color-text-body` = `#666666`
- `color-text-foot` = `#8A9198`（footnote 用 / opacity 0.7）
- アクセントカラーや状態色（Success / Error / Warning）は別途トークン定義を行い、本文に直書きしない。

---

## 3. レイアウト & スペーシング
- **8px グリッド**: 8px を基本とし、必要に応じて 4px のハーフステップを許容。スペーシングトークン例: `{4, 8, 16, 24, 32, 40, 48, 56, 64, ...}`
- **コンポーネント間隔**: 情報密度を高めるため基本は `space-4` ～ `space-8`。ただし読解性を損なう箇所は `space-12` 以上を使い分ける。
- **ボーダー / アウトライン**: 可能な限り排除し、影・背景色の差分・透明度で境界を表現。必要な場合は `border-0.3`（0.3px, opacity 0.3）トークンで統一。
- **レスポンシブ**: Safe Area（`env(safe-area-inset-*)`）を起点に `usable width` を計算。Breakpoints や縦横切り替え時は同じトークンでレイアウトを再構成する。

---

## 4. アニメーションガイド
### 4.1 基本原則
- アニメーションは「意味・状態変化を伝えるための補助線」。視認性 (100ms 以上) と操作レスポンスのバランスを取る。
- タップ直後のレスポンスを最優先しつつ、終端で滑らかな減速を付け“上質さ”を担保する。

### 4.2 モーションカテゴリ別トークン
| トークン | 想定ユースケース | Duration | Easing | メモ |
| --- | --- | --- | --- | --- |
| `motion-tap` | タップ / クリックフィードバック | 50–100ms | `linear` or `easeOutQuad` | 即時性重視。
| `motion-micro` | アイコン切替、トグル | 120–180ms | `cubic-bezier(0.2, 0, 0.38, 0.9)` | 短く滑らか。
| `motion-content` | パネル / モーダル遷移 | 200–300ms | `cubic-bezier(0, 0, 0.2, 1)` | 終端で自然に減速。
| `motion-hero` | ヒーロー、表現リッチ | 320–500ms | `spring` (例: response 0.35, damping 0.8) | 余韻を重視。

### 4.3 イージング定義
- `ease-standard`: `cubic-bezier(0.2, 0, 0.38, 0.9)` — 標準。
- `ease-deceleration`: `cubic-bezier(0, 0, 0.2, 1)` — 終端強調。
- `ease-acceleration`: `cubic-bezier(0.4, 0, 1, 1)` — 開始の勢い付け（警告 UI 等に限定）。
- `ease-spring`: プラットフォーム標準 Spring API を使用し、ダンピングはやや高めに設定。

### 4.4 Spring 設計方針（Apple ライク）
- 用途: 要素の到達・戻り、ドラッグの弾性。
- 推奨例: `response = 0.35`, `dampingFraction = 0.8`（SwiftUI）。React Native Reanimated では `stiffness` / `damping` を同等の比率で調整する。

### 4.5 パフォーマンス最適化ルール
1. **アニメーション対象プロパティを限定**
    - 推奨: `transform`（translate / scale / rotate）と `opacity`。
    - 非推奨: `width` / `height` / `left` / `top` / `margin` / `box-shadow` などレイアウトやペイントを伴うプロパティ。
2. **同時再生数の制御**
    - 1 フレームで重いアニメーションを 2〜3 個以内に制限。複数要素は `stagger` で時間差を付ける。
3. **Overdraw の抑制**
    - 不要な透明レイヤを減らし、背景の不透明化やレイヤ結合で GPU 負荷を軽減。Android の Overdraw Debug / iOS Metal Frame Capture で確認。
4. **レンダリングスレッドの活用**
    - React Native では `useNativeDriver: true`、または Reanimated を優先。JS スレッドと同期させない。
5. **レイヤキャッシュの適材適所な利用**
    - 繰り返し動く要素は独立レイヤ化（`will-change` / `shouldRasterize`）を検討。ただし長時間のラスタライズはメモリ負荷と再バインドコストに注意。
6. **レイアウト再計算の禁止**
    - アニメーション中に DOM / レイアウトの読み書きを混在させない。読み込み → バッチ更新 → アニメーションの順序を守る。

---

## 5. ドキュメント運用
- 新しいスタイル／モーションが追加される場合は、トークン ID と使用箇所を本資料に追記する。
- 実装リリース前に Figma / Storybook / アプリ実機でのトークン反映をクロスチェックする。
- 本資料はデザインレビュー、実装レビュー双方で必ず参照し、逸脱時は理由を明記する。
